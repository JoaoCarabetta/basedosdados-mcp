Metadata-Version: 2.4
Name: basedosdados-mcp
Version: 0.1.0
Summary: Model Context Protocol server for Base dos Dados (Brazilian open data platform)
Author-email: Jo√£o Carabetta <joao.carabetta@gmail.com>
Maintainer-email: Jo√£o Carabetta <joao.carabetta@gmail.com>
License-Expression: MIT
Project-URL: Homepage, https://github.com/JoaoCarabetta/basedosdados-mcp
Project-URL: Documentation, https://github.com/JoaoCarabetta/basedosdados-mcp#readme
Project-URL: Repository, https://github.com/JoaoCarabetta/basedosdados-mcp
Project-URL: Bug Tracker, https://github.com/JoaoCarabetta/basedosdados-mcp/issues
Keywords: mcp,brazil,data,bigquery,government,open-data
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Programming Language :: Python :: 3.13
Classifier: Programming Language :: Python :: 3.14
Classifier: Topic :: Scientific/Engineering :: Information Analysis
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Requires-Python: <=3.14,>=3.10
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: mcp[cli]>=1.0.0
Requires-Dist: httpx>=0.25.0
Requires-Dist: fastmcp>=2.10.1
Requires-Dist: google-cloud-bigquery>=3.0.0
Requires-Dist: db-dtypes>=1.0.0
Provides-Extra: dev
Requires-Dist: pytest>=7.0.0; extra == "dev"
Requires-Dist: pytest-asyncio>=0.21.0; extra == "dev"
Requires-Dist: pytest-cov>=4.0.0; extra == "dev"
Requires-Dist: black>=23.0.0; extra == "dev"
Requires-Dist: ruff>=0.1.0; extra == "dev"
Dynamic: license-file

# Base dos Dados MCP

A Model Context Protocol (MCP) server that provides AI-optimized access to Base dos Dados, Brazil's largest open data platform.

## üí° Create Reports with Real Brazilian Datasets with Claude Desktop

#### Ask it to replicate a news article:

```
User:
https://www.gov.br/secom/pt-br/assuntos/noticias/2025/05/no-melhor-abril-do-novo-caged-brasil-gera-257-mil-vagas-com-carteira-assinada

consegue replicar a materia e checar os numeros?

Claude: https://claude.ai/public/artifacts/15d7f5c5-f017-4a96-9380-a93e535001fd
```

#### Or a research question

```
User:
https://claude.ai/share/f8dbbe5b-1c34-4804-9462-1bfb9008558d

Claude: https://claude.ai/share/f8dbbe5b-1c34-4804-9462-1bfb9008558d
```

#### 


## ‚ú® Features

- **üîç Smart Search**: Portuguese language support with accent normalization
- **üìä BigQuery Integration**: Direct SQL execution and table references
- **üáßüá∑ Brazilian Data Focus**: IBGE, RAIS, TSE, INEP datasets
- **ü§ñ AI-Optimized**: Single-call comprehensive data retrieval

## üöÄ Quick Install to Claude Desktop

Just run this line in your terminal
```bash
bash -i <(curl -LsSf https://raw.githubusercontent.com/JoaoCarabetta/basedosdados-mcp/refs/heads/main/install.sh)
```

Add your BigQuery project_id, location and service account.

Restart Claude Desktop and you are good to go!

‚ö†Ô∏è I just tested it in my Mac M-Series

## üõ†Ô∏è Tools

| Tool | Description |
|------|-------------|
| `search_datasets` | Search datasets with Portuguese support |
| `get_dataset_overview` | Get complete dataset overview with tables |
| `get_table_details` | Get table details with columns and SQL samples |
| `execute_bigquery_sql` | Execute SQL queries directly |
| `check_bigquery_status` | Check BigQuery authentication |







## üîß Development

```bash
git clone https://github.com/JoaoCarabetta/basedosdados-mcp
cd basedosdados-mcp
uv sync
uv run basedosdados-mcp
```

## üß™ Testing

Install development dependencies and run the comprehensive test suite:

```bash
# Install dev dependencies (includes pytest)
uv sync --extra dev

# Run all encoding tests
pytest tests/ -v

# Run specific test categories
pytest tests/ -k "encoding" -v        # Encoding tests only
pytest tests/ -k "live" -v            # Live server tests only
pytest tests/ -m "not live" -v        # Skip live tests (faster)

# Run with coverage
pytest tests/ --cov=basedosdados_mcp --cov-report=html
```

### Test Structure

The pytest-based test suite includes:

- **`test_encoding_pytest.py`**: Core Portuguese character encoding tests
  - UTF-8 encoding/decoding validation
  - JSON serialization integrity
  - MCP protocol compatibility
  - Parametrized tests for individual Portuguese words

- **`test_live_mcp_pytest.py`**: Live MCP server endpoint tests
  - Real API response validation
  - Backend API encoding verification
  - Large response handling
  - End-to-end encoding flow

- **`conftest.py`**: Shared fixtures and pytest configuration
  - Common test data and utilities
  - Automatic test marking and organization

### Encoding Validation

**Portuguese characters tested**: `popula√ß√£o`, `educa√ß√£o`, `sa√∫de`, `regi√£o`, `sat√©lites`, `pol√≠ticas`, `p√∫blicas`, and 30+ more common Brazilian dataset terms.

**Corruption patterns detected**: `√É¬©`, `√É¬°`, `√É¬≠`, `√É¬≥`, `√É¬∫`, `√É¬£`, `√É¬ß`, `√É¬¥`, `√É¬™`, `√É `, `√É¬µ` (common UTF-8 corruption)

If you experience encoding issues in Claude Desktop (e.g., seeing `sat√É¬©lites` instead of `sat√©lites`), run the tests to verify the issue is in the display layer, not the MCP server itself.

## üìö About

[Base dos Dados](https://basedosdados.org) is Brazil's largest open data platform, providing standardized access to Brazilian public datasets through BigQuery.

**Data Coverage**: Demographics, Economics, Education, Politics, Health, Environment

## üìÑ License

MIT License
